Проект **«Simple search address»** позволяет найти на карте по указанному адресу. На странице отображается карта и простая поисковая система по адресу с возможностью отображения списка подсказок. В случае выбора места выполняется релокация на карте.

Данный проект разработан на базе [Create React App](https://github.com/facebookincubator/create-react-app) и применяет следующие ключевые компоненты:
- [react-google-maps](https://www.npmjs.com/package/react-google-map) для отображения карты
- [@google/maps](https://www.npmjs.com/package/@google/maps) для получения списка подсказок на стороне сервера

На стороне сервера используется один API адрес `/maps/api/places/json`, возвращающий список подсказок по указанному адресу.
Также на стороне клиента используется API-метод geocode для получения данных о геолокации.

## Содержание

- [Настройки приложения](#settings-app)
- [Настройка страницы с картой от Google](#settings-page)
- [API метод на стороне сервера](#api)
- [Доступные команды](#available-scripts)
  - [npm run client](#npm-run-client)
  - [npm run build](#npm-run-build)
  - [npm run server](#npm-run-server)
  - [npm run start-dev](#npm-run-start-dev)
  - [npm run start-prod](#npm-run-start-prod)

## Настройки приложения

Настройки приложения хранятся в файле `src/app/common/js/settings.js`. В данном файле доступны три настройки:

* `CLIENT_API_KEY` - API ключ для получения Geo, списка подсказок от Google Map;
* `IS_DEMO_MODE` - свитч демо режима приложения. Принимает булево значение. В случае, если приложение запускается в **демо** режиме (значение **true**), то данные о подсказках, геолокации берутся из `src/app/common/js/data.js`, а на странице в шапке помечается **demo**. В противном случае приложение запускается в **публичном** режиме (значение **false**) и данные о подсказках, геолокации берутся из сервиса Google, используя **API ключ**. **Внимание! Перед отключением демо режима нужно указать API ключ в свойстве `CLIENT_API_KEY`**;
* `HINT_MAX_COUNT` - максимальное количество отображаемых подсказок при вводе значения длиной не менее 3 символов.

## Настройка страницы с картой от Google

На странице при отображении карты используется сервис от Google. Для корректного отображения карты нужно указать корректный API ключ. Для изменения значения API ключа откройте исходник `public/index.html`, найдите строку, содержащую `//maps.googleapis.com/maps/api/js?language=ru&key=API_KEY`. Измените в найденной строке значение ключа с `API_KEY` на значение Вашего ключа.

## API метод на стороне сервера

Для получения списка подсказок используется API метод `/maps/api/places/json`, который принимает следующие параметры:
 
* `mode` - режим приложения. Принимает два значения:
    * `0` - режим **demo**. Список подсказок берутся из метода в *getLocalPlaces* `src/app/common/js/data.js`
    * `1` - **публичный** режим. Приложение обращается к сервису Google с применением API ключа (см. [Настройки приложения](#settings-app)). 
* `value` - значение запроса. Например, `saint`.

Например, `/maps/api/places/json?mode=0&value=saint` вернет список подсказок в режиме **demo**.

## Доступные команды

Команды запускаются в консоле. В корневом каталоге Вы можете использовать следующие команды:

### `npm run client`

Запускается клиентская часть приложения в режиме разработки (development). Открывается страница [http://localhost:3000](http://localhost:3000) в браузере.<br>
В случае внесения изменений в исходниках страница будет перезагружена автоматически. Также Вы можете увидеть lint ошибки в консоле. 

### `npm run build`

Собирается клиентская часть приложения в режиме продакшена (production) с минифицированными исходниками для лучшей производительности в каталоге `build`.<br>

Ваше клиентское приложение готово для деплоя!

### `npm run server`

Запускается серверная часть приложения.<br>
После успешного запуска в консоле будет выводиться строка `Listening on port 7000`. Для проверки можете использовать следующий API запрос:

[http://localhost:7000/maps/api/places/json?mode=0&value=saint](http://localhost:7000/maps/api/places/json?mode=0&value=saint)

### `npm run start-dev`

Запускается серверная и клиентская части приложения в режиме разработки (development).<br>
При успешном запуске серверной и клиентской части приложения открывается страница [http://localhost:3000](http://localhost:3000) в браузере.
В случае внесения изменений в исходниках страница будет перезагружена автоматически.<br>
Также Вы можете увидеть lint ошибки в консоле. 

### `npm run start-prod`

Собирается и запускается приложение в режиме продакшена (production).<br>
Сначала собирается клиентская часть приложения с минифицированными исходниками для лучшей производительности в каталоге `build`. Затем запускается серверная и клиентская части приложения. После успешного запуска в консоле будет выводиться строка `Listening on port 7000`. Вы можете открыть страницу [http://localhost:7000](http://localhost:7000) в браузере.<br>

Ваше клиентское приложение готово для деплоя!